<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /views/layout.html -->
{% extends 'layout.html' %}
<!--
  In /views/layout.html you can:
    - change the header and footer
    - add custom CSS and JavaScript
-->

<!-- Set the page title inside the pageTitle block -->
{% block pageTitle %} Check your answers {% endblock %}

<!-- Breadcrumb goes inside the beforeContent block -->
<!-- More info and code for the breadcrumb can be found at https://service-manual.nhs.uk/design-system/components/breadcrumbs -->
{% block beforeContent %}
<!-- Breadcrumb -->

{% endblock %}
<!-- Your page content goes inside the content block -->
<!-- More info and code for the page layout can be found at https://service-manual.nhs.uk/design-system/styles/layout -->
{% block content %}

<div class="nhsuk-width-container">
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">
      <h1 class="nhsuk-app-heading">
        <span class="nhsuk-caption-l">Change of circumstances</span>
        Check your partner details answers
      </h1>

      <form action="/change-of-circumstances/V4/apply/partner-cya-route" method="POST">

        <dl class="nhsuk-summary-list">

          <!-- If not married or in a civil partnership, show living with partner question -->
          {% if data['relationshipStatus'] != 'Married or in a civil partnership' %}
          <div class="nhsuk-summary-list__row">
            <dt class="nhsuk-summary-list__key">
              Do you live with a partner?
            </dt>
            <dd class="nhsuk-summary-list__value">
              <p>
                {{ data['livingWithPartner'] }}
              </p>
            </dd>
            <dd class="nhsuk-summary-list__actions">
              <a href="partner-live-with-partner">
                Change<span class="nhsuk-u-visually-hidden">living with partner</span>
              </a>
            </dd>
          </div>
          {% endif %}


          <!-- If married/in civil partnership or living with partner, show partner details -->
          {% if data['relationshipStatus'] == 'Married or in a civil partnership' or data['livingWithPartner'] == 'Yes'
          %}

          <div class="nhsuk-summary-list__row">
            <dt class="nhsuk-summary-list__key">
              Partner's name
            </dt>
            <dd class="nhsuk-summary-list__value">
              <p>
                {% if data['partnerFirstName'] %}
                {{ data['partnerFirstName'] }}
                {% elif data['livingWithPartner'] == 'Yes' %}
                John
                {% else %}
                Harry
                {% endif %}

                {% if data['partnerLastName'] %}
                {{ data['partnerLastName'] }}
                {% elif data['livingWithPartner'] == 'Yes' %}
                Brunton
                {% else %}
                Watson
                {% endif %}
              </p>
            </dd>
            <dd class="nhsuk-summary-list__actions">
              <a href="partner-name">
                Change<span class="nhsuk-u-visually-hidden">name</span>
              </a>
            </dd>
          </div>


          <div class="nhsuk-summary-list__row">
            <dt class="nhsuk-summary-list__key">
              Partner's email
            </dt>
            <dd class="nhsuk-summary-list__value">
              <p>
                {% if data['partnerEmail'] %}
                {{ data['partnerEmail'] }}
                {% elif data['livingWithPartner'] == 'Yes' %}
                johnbrunton@gmail.com
                {% else %}
                harrywatson@gmail.com
                {% endif %}
              </p>
            </dd>
            <dd class="nhsuk-summary-list__actions">
              <a href="partner-email">
                Change<span class="nhsuk-u-visually-hidden">email</span>
              </a>
            </dd>
          </div>

          {% endif %}

        </dl>


        <p>By clicking accept you're confirming that the details you're providing are correct.</p>

        <button class="nhsuk-button" type="submit">Accept and continue</button>

        <p><a id="canceltoTasklist" href="tasklist-approved">Cancel and return to dashboard</a></p>

      </form>
    </div>
  </div>
</div>




<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function () {
    const months = {
      "01": "January",
      "02": "February",
      "03": "March",
      "04": "April",
      "05": "May",
      "06": "June",
      "07": "July",
      "08": "August",
      "09": "September",
      "1": "January",
      "2": "February",
      "3": "March",
      "4": "April",
      "5": "May",
      "6": "June",
      "7": "July",
      "8": "August",
      "9": "September",
      "10": "October",
      "11": "November",
      "12": "December",
    };

    $(".cya-month").text(function () {
      const month = $(this).text();
      console.log("month:", month);
      console.log("months[month]:", months[month]);
      return months[month];
    });
  });
</script>

{% endblock %}